<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Selection Sort Visualizer</title>
    <link rel="stylesheet" href="./algo_style.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />
    <style>
      /* Existing CSS styles */
      #first {
        width: 95%;
        height: 20rem;
        background-color: white;
        margin: auto;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-wrap: nowrap; /* Change from wrap to nowrap */
        position: relative;
        overflow-x: auto; /* Allow horizontal scrolling if necessary */
      }
      #first > span {
        padding: 0.5rem 1rem;
        background-color: navajowhite;
        font-size: 1.5rem;
        margin: 0.5rem;
        text-align: center;
        line-height: 2rem;
        transition: transform 0.5s ease, background-color 0.5s ease;
        z-index: 1;
        display: inline-block; /* Ensure they are displayed inline */
      }
      .current-min {
        background-color: #FF004D;
        z-index: 2;
      }
      .lifted {
        animation: lift 0.5s ease forwards;
      }
      .swapping {
        animation: swap 0.5s ease forwards;
      }
      @keyframes lift {
        0% {
          transform: translateY(0) scale(1);
        }
        50% {
          transform: translateY(-100px) scale(1.2);
        }
        100% {
          transform: translateY(-100px) scale(1.2);
        }
      }
      @keyframes swap {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.2);
        }
        100% {
          transform: scale(1);
        }
      }
      #second {
        width: 95%;
        margin: auto;
        display: flex;
        justify-content: center;
        margin-top: 1rem;
      }
      input {
        width: 5rem;
        height: 2rem;
        padding: 1.5rem;
        font-size: 2rem;
        border: none;
        border-radius: 0.5rem;
      }
      button {
        padding: 1rem 2rem;
        margin-left: 1rem;
        font-size: 2rem;
        font-weight: 600;
        background-color: rgba(0, 128, 0, 0.747);
        cursor: pointer;
        border-radius: 0.5rem;
        border: none;
      }
      button:hover {
        background-color: rgb(6, 206, 6);
      }
      #third {
        background-color: white;
        width: 95%;
        height: 5rem;
        margin: auto;
        border-bottom-left-radius: 0.5rem;
        border-bottom-right-radius: 0.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      #third > span {
        font-size: 1.5rem;
        font-weight: 600;
      }
      #fourth {
        width: 95%;
        margin: auto;
        padding: 2rem;
        background-color: #faef5d;
        border-radius: 0.5rem;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        color: #1d2b53;
        text-align: center;
        position: relative;
        bottom: 0;
      }
      #fourth .info {
        max-width: 800px;
        margin: auto;
      }
      #fourth h2 {
        font-size: 2rem;
        font-weight: bold;
        margin-bottom: 1rem;
      }
      #fourth h3 {
        font-size: 1.5rem;
        margin-top: 1rem;
      }
      #fourth p {
        font-size: 1.2rem;
        line-height: 1.5;
      }
    </style>
  </head>
  <body>
    <div id="main">
      <!-- nav bar start -->
      <nav>
        <img src="./Main_Logo.jpeg" alt="" />
        <p>Selection Sort</p>
        <p id="hamburger">=</p>
      </nav>
      <hr style="color: gray" />
      <!-- nav bar end -->

      <!-- First Section start -->
      <section id="first"></section>
      <!-- First Section end -->

      <section id="third"></section>

      <!-- Second Section start -->
      <section id="second">
        <form id="form">
          <input type="number" required id="push" placeholder="0" />
          <button type="submit">Add</button>
        </form>
        <button id="sort-asc">Sort Ascending</button>
        <button id="sort-desc">Sort Descending</button>
      </section>
      <!-- Second Section end -->
      
      <!-- Fourth Section start -->
      <section id="fourth">
        <div class="info">
          <h2>Selection Sort Algorithm</h2>
          <p>
            Selection Sort is a simple sorting algorithm that divides the list into two parts: a sorted part and an unsorted part. The algorithm repeatedly selects the smallest (or largest, depending on the order) element from the unsorted part and moves it to the end of the sorted part. This process continues until the unsorted part is empty.
          </p>
          <h3>Algorithm</h3>
          <p>
            1. Start with the first element as the minimum.<br>
            2. Compare this minimum element with all other elements.<br>
            3. If a smaller element is found, update the minimum.<br>
            4. Swap the minimum element with the first element.<br>
            5. Move the boundary of the sorted part one position forward.<br>
            6. Repeat the process until the entire list is sorted.
          </p>
          <h3>Time Complexity</h3>
          <p>
            Best Case: O(n²)<br>
            Average Case: O(n²)<br>
            Worst Case: O(n²)
          </p>
        </div>
      </section>
      <!-- Fourth Section end -->
    </div>
    <script src="./algo_scripts.js"></script>
    <script>
      let arr = [];

      document.getElementById("form").addEventListener('submit', input);
      document.getElementById("sort-asc").addEventListener('click', () => sort('asc'));
      document.getElementById("sort-desc").addEventListener('click', () => sort('desc'));

      function input(event) {
        event.preventDefault();
        let val = document.getElementById("push").value;
        arr.push(parseInt(val));
        if (arr.length > 0) {
          show();
        }
        document.getElementById("third").innerHTML = "";
        document.getElementById("third").innerHTML = `<span>Added: ${val}</span>`;
      }

      function show() {
        let vision = document.getElementById('first');
        vision.innerHTML = ""; // Clear previous elements
        arr.forEach((ele, index) => {
          let span = document.createElement("span");
          span.innerHTML = `${ele}`;
          vision.appendChild(span);
        });
      }

      async function sort(order) {
        for (let i = 0; i < arr.length; i++) {
          let targetIndex = i;

          document.querySelectorAll('#first > span').forEach((elem, index) => {
            if (index === targetIndex) {
              elem.classList.add('current-min');
            } else {
              elem.classList.remove('current-min');
            }
          });

          for (let j = i + 1; j < arr.length; j++) {
            if ((order === 'asc' && arr[j] < arr[targetIndex]) || (order === 'desc' && arr[j] > arr[targetIndex])) {
              targetIndex = j;
            }
          }

          if (targetIndex !== i) {
            await animateSwap(i, targetIndex);
            [arr[i], arr[targetIndex]] = [arr[targetIndex], arr[i]];
            show();
          }
        }
        document.getElementById("third").innerHTML = `<span>Sorting Completed</span>`;
      }

      function animateSwap(i, j) {
        return new Promise((resolve) => {
          let elements = document.querySelectorAll('#first > span');
          let elemI = elements[i];
          let elemJ = elements[j];

          elemI.classList.add('lifted');
          elemJ.classList.add('lifted');

          let posI = elemI.style.left;
          let posJ = elemJ.style.left;
          elemI.style.left = posJ;
          elemJ.style.left = posI;

          setTimeout(() => {
            elemI.classList.remove('lifted');
            elemJ.classList.remove('lifted');
            elemI.classList.add('swapping');
            elemJ.classList.add('swapping');

            let tempHTML = elemI.innerHTML;
            elemI.innerHTML = elemJ.innerHTML;
            elemJ.innerHTML = tempHTML;

            setTimeout(() => {
              elemI.classList.remove('swapping');
              elemJ.classList.remove('swapping');
              resolve();
            }, 500); 
          }, 500);
        });
      }
    </script>
  </body>
</html>
