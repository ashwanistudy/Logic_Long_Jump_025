<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quick Sort Visualization</title>
  <link rel="stylesheet" href="./algo_style.css" />
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
  />
  <style>
    #first {
      width: 95%;
      height: 20rem;
      background-color: rgba(96, 64, 147, 0.706);
      margin: auto;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }
    #first > span {
        padding: 0.5rem 1rem;
        background-color: navajowhite;
        font-size: 1.5rem;
        margin: 0.5rem;
        text-align: center;
        line-height: 2rem;
        transition: transform 0.5s ease, background-color 0.5s ease,
          background-color 0.3s ease;
        z-index: 1;
        position: relative;
      }

      #first > span:hover {
        background-color: #ff004d; 
        transform: scale(1.1); 
      }
    .current-min {
      background-color: #FF004D;
      z-index: 2;
    }
    .lifted {
      animation: lift 0.5s ease forwards;
    }
    .swapping {
      animation: swap 0.5s ease forwards;
    }
    @keyframes lift {
      0% {
        transform: translateY(0) scale(1);
      }
      50% {
        transform: translateY(-100px) scale(1.2);
      }
      100% {
        transform: translateY(-100px) scale(1.2);
      }
    }
    @keyframes swap {
      0% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.2);
      }
      100% {
        transform: scale(1);
      }
    }
    #second {
      width: 95%;
      margin: 2rem auto; 
      display: flex;
      align-items: center;
      justify-content: center; 
      gap: 1rem;
    }
    #second form {
      display: flex;
      align-items: center;
      gap: 1rem; 
    }
    input {
      width: 20rem; 
      height: 2rem;
      padding: 0.5rem;
      font-size: 1.5rem;
      border: 2px solid #1d2b53;
      border-radius: 0.5rem;
      background-color: rgba(96, 64, 147, 0.706);
    }
    button {
      padding: 0.5rem 1rem;
      font-size: 1.5rem;
      font-weight: 600;
      background-color: rgba(0, 128, 0, 0.747);
      cursor: pointer;
      border-radius: 0.5rem;
      border: 2px solid #1d2b53;
      color: white;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: rgb(6, 206, 6);
    }

    #third {
      background: linear-gradient(90deg, rgba(238, 174, 202, 1) 0%, rgba(148, 187, 233, 1) 100%);
      width: 95%;
      height: 5rem;
      margin: 2rem auto; /* Center horizontally and add vertical margin */
      border-bottom-left-radius: 0.5rem;
      border-bottom-right-radius: 0.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    #third > span {
      font-size: 1.5rem;
      font-weight: 600;
    }
    .arrow-container {
      position: absolute;
      width: 0;
      height: 0;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .arrow-top {
      top: -2rem;
    }
    .arrow-bottom {
      bottom: -2rem;
    }
    .arrow {
      width: 0;
      height: 0;
      border-left: 10px solid transparent;
      border-right: 10px solid transparent;
    }
    .arrow-label {
      text-align: center;
      font-size: 1rem;
      font-weight: bold;
      margin-top: -10px;
    }
    .arrow-top .arrow {
      border-bottom: 20px solid black;
      margin-bottom: 5px;
    }
    .arrow-bottom .arrow {
      border-top: 20px solid black;
      margin-top: 5px;
    }
    #fourth {
      width: 95%;
      margin: 2rem auto; /* Center horizontally and add vertical margin */
      padding: 2rem;
      background-color: antiquewhite;
      border-radius: 0.5rem;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      color: #1d2b53;
      text-align: center;
      position: relative;
      bottom: 0;
    }
    #fourth .info {
      max-width: 800px;
      margin: auto;
    }
    #fourth h2 {
      font-size: 2rem;
      font-weight: bold;
      margin-bottom: 1rem;
    }
    #fourth h3 {
      font-size: 1.5rem;
      margin-top: 1rem;
    }
    #fourth p {
      font-size: 1.2rem;
      line-height: 1.5;
    }
  </style>
</head>
<body>
  <div id="main">
    <!-- nav bar start -->
    <nav>
      <img src="./Main_Logo.jpeg" alt="" />
      <p>Quick Sort Visualization</p>
      <p id="hamburger">=</p>
    </nav>
    <hr style="color: gray" />
    <!-- nav bar end -->

    <!-- First Section start -->
    <section id="first"></section>
    <!-- First Section end -->

    <section id="third"></section>

    <!-- Second Section start -->
    <section id="second">
      <form id="form">
        <input type="text" id="push" placeholder="Enter elements, separated by commas" />
        <button type="submit">Add</button>
        <button type="button" id="sort">Sort</button>
        <button type="button" id="generate">Generate Random Array</button>
      </form>
    </section>
    <!-- Second Section end -->

    <!-- Fourth Section start -->
    <section id="fourth">
      <div class="info">
        <h2>Quick Sort Algorithm</h2>
        <p>
          Quick Sort is an efficient, comparison-based sorting algorithm that uses the divide-and-conquer principle.
          It works by selecting a 'pivot' element from the array and partitioning the other elements into two sub-arrays
          according to whether they are less than or greater than the pivot. The sub-arrays are then sorted recursively.
        </p>
        <h3>Algorithm</h3>
        <p>
          1. Choose a pivot element from the array.<br>
          2. Partition the array into two sub-arrays: one with elements less than the pivot and one with elements greater than the pivot.<br>
          3. Recursively apply the above steps to the sub-arrays.<br>
          4. Combine the sub-arrays to get the sorted array.
        </p>
        <h3>Time Complexity</h3>
        <p>
          Best Case: O(n log n)<br>
          Average Case: O(n log n)<br>
          Worst Case: O(nÂ²)
        </p>
      </div>
    </section>
    <!-- Fourth Section end -->
  </div>
  <script src="./algo_scripts.js"></script>
  <script>
    let arr = [];

    document.getElementById("form").addEventListener("submit", input);
    document.getElementById("sort").addEventListener("click", () => quickSort(0, arr.length - 1));
    document.getElementById("generate").addEventListener("click", generateRandomArray);

    function input(event) {
      event.preventDefault();
      let val = document.getElementById("push").value;
      arr = val.split(',').map(num => parseInt(num.trim())).filter(num => !isNaN(num));
      if (arr.length > 0) {
        show();
      }
      document.getElementById("third").innerHTML = `<span>Added: ${arr.join(', ')}</span>`;
    }

    function generateRandomArray() {
      const size = 10; // You can change the size of the array
      arr = Array.from({ length: size }, () => Math.floor(Math.random() * 100) + 1);
      show();
      document.getElementById("third").innerHTML = `<span>Generated: ${arr.join(', ')}</span>`;
    }

    function show() {
      let container = document.getElementById("first");
      container.innerHTML = "";

      let totalWidth = arr.length * 80;
      let containerWidth = container.clientWidth;
      let startLeft = (containerWidth - totalWidth) / 2;

      arr.forEach((ele, index) => {
        let span = document.createElement("span");
        span.innerHTML = `${ele}`;
        span.style.left = `${startLeft + index * 80}px`;
        span.setAttribute("data-index", index);
        container.appendChild(span);
      });
    }

    function quickSort(low, high) {
      if (low < high) {
        let pivotIndex = partition(low, high);
        quickSort(low, pivotIndex - 1);
        quickSort(pivotIndex + 1, high);
      }
    }

    function partition(low, high) {
      let pivot = arr[high];
      let i = low - 1;
      for (let j = low; j < high; j++) {
        if (arr[j] < pivot) {
          i++;
          [arr[i], arr[j]] = [arr[j], arr[i]];
          show();
        }
      }
      [arr[i + 1], arr[high]] = [arr[high], arr[i + 1]];
      show();
      return i + 1;
    }
  </script>
</body>
</html>
