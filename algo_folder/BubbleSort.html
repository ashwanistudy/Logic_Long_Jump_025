<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bubble Sort</title>
    <link rel="stylesheet" href="./algo_style.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />

    <style>
      #first {
        width: 95%;
        height: 20rem;
        background-color: white;
        margin: auto;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-wrap: wrap;
        position: relative;
        overflow: hidden;
      }
      #first > span {
        padding: 0.5rem 1rem;
        background-color: navajowhite;
        font-size: 1.5rem;
        margin: 0.5rem;
        text-align: center;
        line-height: 2rem;
        transition: transform 0.5s ease, background-color 0.5s ease;
        z-index: 1;
        position: relative;
      }
      .current-min {
        background-color: #ff004d;
        z-index: 2;
      }
      .lifted {
        animation: lift 0.5s ease forwards;
      }
      .swapping {
        animation: swap 0.5s ease forwards;
      }
      @keyframes lift {
        0% {
          transform: translateY(0) scale(1);
        }
        50% {
          transform: translateY(-100px) scale(1.2);
        }
        100% {
          transform: translateY(-100px) scale(1.2);
        }
      }
      @keyframes swap {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.2);
        }
        100% {
          transform: scale(1);
        }
      }
      #second {
        width: 95%;
        margin: auto;
        display: flex;
        justify-content: center;
        margin-top: 1rem;
      }
      input {
        width: 5rem;
        height: 2rem;
        padding: 1.5rem;
        font-size: 2rem;
        border: none;
        border-radius: 0.5rem;
      }
      button {
        padding: 1rem 2rem;
        margin-left: 1rem;
        font-size: 2rem;
        font-weight: 600;
        background-color: rgba(0, 128, 0, 0.747);
        cursor: pointer;
        border-radius: 0.5rem;
        border: none;
      }
      button:hover {
        background-color: rgb(6, 206, 6);
      }
      #third {
        background-color: white;
        width: 95%;
        height: 5rem;
        margin: auto;
        border-bottom-left-radius: 0.5rem;
        border-bottom-right-radius: 0.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      #third > span {
        font-size: 1.5rem;
        font-weight: 600;
      }
      #fourth {
        width: 95%;
        margin: auto;
        padding: 2rem;
        background-color: #faef5d;
        border-radius: 0.5rem;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        color: #1d2b53;
        text-align: center;
        position: relative;
        bottom: 0;
      }
      #fourth .info {
        max-width: 800px;
        margin: auto;
      }
      #fourth h2 {
        font-size: 2rem;
        font-weight: bold;
        margin-bottom: 1rem;
      }
      #fourth h3 {
        font-size: 1.5rem;
        margin-top: 1rem;
      }
      #fourth p {
        font-size: 1.2rem;
        line-height: 1.5;
      }
    </style>
  </head>
  <body>
    <div id="main">
      <!-- nav bar start -->
      <nav>
        <img src="./Main_Logo.jpeg" alt="" />
        <p>Bubble Sort</p>
        <p id="hamburger">=</p>
      </nav>
      <hr style="color: gray" />
      <!-- nav bar end -->

      <!-- First Section start -->
      <section id="first"></section>
      <!-- First Section end -->

      <section id="third"></section>

      <!-- Second Section start -->
      <section id="second">
        <form id="form">
          <input type="number" required id="push" placeholder="0" />
          <button type="submit">Add</button>
        </form>
        <button id="sort-asc">Sort Ascending</button>
        <button id="sort-desc">Sort Descending</button>
      </section>
      <!-- Second Section end -->
      
      <!-- Fourth Section start -->
      <section id="fourth">
        <div class="info">
          <h2>Bubble Sort Algorithm</h2>
          <p>
            Bubble Sort is a simple sorting algorithm that repeatedly steps through the list, compares adjacent elements, and swaps them if they are in the wrong order. This process is repeated until the list is sorted.
          </p>
          <h3>Algorithm</h3>
          <p>
            1. Compare the first two adjacent elements.<br>
            2. If the first element is greater than the second, swap them.<br>
            3. Move to the next pair of adjacent elements and repeat the process.<br>
            4. Continue until the end of the list is reached.<br>
            5. Repeat the process for the entire list until no swaps are needed.
          </p>
          <h3>Time Complexity</h3>
          <p>
            Best Case: O(n)<br>
            Average Case: O(n²)<br>
            Worst Case: O(n²)
          </p>
        </div>
      </section>
      <!-- Fourth Section end -->
    </div>
    <script src="./algo_scripts.js"></script>

    <script>
      let arr = [];

      document.getElementById("form").addEventListener("submit", input);
      document.getElementById("sort-asc").addEventListener("click", () => bubbleSort(arr, true));
      document.getElementById("sort-desc").addEventListener("click", () => bubbleSort(arr, false));

      function input(event) {
        event.preventDefault();
        let val = document.getElementById("push").value;
        arr.push(parseInt(val));
        if (arr.length > 0) {
          show();
        }
        document.getElementById("third").innerHTML = "";
        document.getElementById("third").innerHTML = `<span>Added: ${val}</span>`;
      }

      function show() {
        document.getElementById("first").innerHTML = "";
        arr.forEach((ele, index) => {
          let span = document.createElement("span");
          span.innerHTML = `${ele}`;
          span.style.left = `${(index - arr.length / 2) * 80}px`;
          let vision = document.getElementById("first");
          vision.appendChild(span);
        });
      }

      async function bubbleSort(arr, isAscending) {
        let n = arr.length;
        for (let i = 0; i < n - 1; i++) {
          for (let j = 0; j < n - i - 1; j++) {
            if (isAscending ? arr[j] > arr[j + 1] : arr[j] < arr[j + 1]) {
              await swapAndAnimate(arr, j, j + 1);
            }
          }
        }
        document.getElementById("third").innerHTML = `<span>Sorting Completed</span>`;
      }

      async function swapAndAnimate(arr, index1, index2) {
        [arr[index1], arr[index2]] = [arr[index2], arr[index1]];
        show();

        return new Promise((resolve) => {
          let elements = document.querySelectorAll("#first > span");
          let startPos = elements[index1].style.left;
          let endPos = elements[index2].style.left;

          elements[index1].classList.add("lifted");
          elements[index2].classList.add("lifted");

          setTimeout(() => {
            elements[index1].style.left = endPos;
            elements[index2].style.left = startPos;

            elements[index1].classList.remove("lifted");
            elements[index2].classList.remove("lifted");

            elements[index1].classList.add("swapping");
            elements[index2].classList.add("swapping");

            setTimeout(() => {
              elements[index1].classList.remove("swapping");
              elements[index2].classList.remove("swapping");
              resolve();
            }, 500);
          }, 500);
        });
      }
    </script>
  </body>
</html>
